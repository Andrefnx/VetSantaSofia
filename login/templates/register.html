{% load static %}
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro - Veterinaria Santa Sofía</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{% static 'login/css/style_login_register.css' %}">
</head>

<body>
    <main class="auth-container">
        <section class="auth-image">
            <img src="{% static 'login/img/vet_vector.svg' %}" alt="Veterinaria Santa Sofía">
        </section>

        <section class="auth-form">
            <h2>Crear Cuenta</h2>
            <p class="subtitle">Completa los datos para registrarte</p>

            <form method="post" id="registerForm">
                {% csrf_token %}

                <h3>Datos Personales</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="id_rut">RUT *</label>
                        {{ form.rut }}
                    </div>
                    <div class="form-group">
                        <label for="id_fecha_nacimiento">Fecha de Nacimiento</label>
                        {{ form.fecha_nacimiento }}
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="id_first_name">Nombre *</label>
                        {{ form.first_name }}
                    </div>
                    <div class="form-group">
                        <label for="id_last_name">Apellido *</label>
                        {{ form.last_name }}
                    </div>
                </div>

                <h3>Contacto</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="id_email">Correo Electrónico *</label>
                        {{ form.email }}
                    </div>
                    <div class="form-group">
                        <label for="id_telefono">Teléfono</label>
                        {{ form.telefono }}
                    </div>
                </div>

                <div class="form-group">
                    <label for="id_direccion">Dirección</label>
                    {{ form.direccion }}
                </div>

                <h3>Credenciales</h3>
                <div class="form-row">
                    <div class="form-group password-toggle">
                        <label for="id_password1">Contraseña *</label>
                        {{ form.password1 }}
                        <i class="bi bi-eye-slash toggle-icon" id="togglePassword1"></i>
                        <small class="hint">Mínimo 8 caracteres, incluir mayúscula, número y símbolo.</small>
                    </div>
                    <div class="form-group password-toggle">
                        <label for="id_password2">Confirmar Contraseña *</label>
                        {{ form.password2 }}
                        <i class="bi bi-eye-slash toggle-icon" id="togglePassword2"></i>
                    </div>
                </div>

                <button type="submit" class="btn-primary">Registrarse</button>
                <p class="alt-link">¿Ya tienes cuenta? <a href="{% url 'login' %}">Inicia sesión aquí</a></p>
            </form>
        </section>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Toggle contraseña
            const toggle = (id, icon) => {
                const input = document.getElementById(id);
                const iconEl = document.getElementById(icon);
                input.type = input.type === 'password' ? 'text' : 'password';
                iconEl.classList.toggle('bi-eye');
                iconEl.classList.toggle('bi-eye-slash');
            };
            if (document.getElementById('togglePassword1'))
                togglePassword1.onclick = () => toggle('id_password1', 'togglePassword1');
            if (document.getElementById('togglePassword2'))
                togglePassword2.onclick = () => toggle('id_password2', 'togglePassword2');
        });
    </script>
</body>

</html>
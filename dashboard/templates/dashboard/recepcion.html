{% extends 'partials/dashboard_base.html' %}
{% load static %}

{% block dashboard_title %}Dashboard Recepción{% endblock %}

{% block dashboard_extra_css %}
<link rel="stylesheet" href="{% static 'css/base/tables_base.css' %}">
<link rel="stylesheet" href="{% static 'css/custom/dashboard_vet.css' %}">
{% endblock %}

{% block dashboard_page_header %}
<div class="page-header">
    <h3 class="fw-bold mb-3">Dashboard Recepción</h3>
</div>
{% endblock %}

{% block dashboard_metrics %}
<!-- Indicadores de Resumen -->
<div class="row g-2 mb-3">
    <div class="col-6 col-sm-4 col-md-2">
        <div class="card card-stats card-round">
            <div class="card-body p-3">
                <div class="row align-items-center">
                    <div class="col-icon">
                        <div class="icon-big text-center icon-primary bubble-shadow-small">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                    </div>
                    <div class="col col-stats ms-2">
                        <div class="numbers">
                            <p class="card-category">Citas Hoy</p>
                            <h4 class="card-title">{{ indicadores.citas_hoy }}</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-6 col-sm-4 col-md-2">
        <div class="card card-stats card-round">
            <div class="card-body p-3">
                <div class="row align-items-center">
                    <div class="col-icon">
                        <div class="icon-big text-center icon-warning bubble-shadow-small">
                            <i class="fas fa-clock"></i>
                        </div>
                    </div>
                    <div class="col col-stats ms-2">
                        <div class="numbers">
                            <p class="card-category">Pendientes</p>
                            <h4 class="card-title">{{ indicadores.citas_pendientes }}</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-6 col-sm-4 col-md-2">
        <div class="card card-stats card-round">
            <div class="card-body p-3">
                <div class="row align-items-center">
                    <div class="col-icon">
                        <div class="icon-big text-center icon-success bubble-shadow-small">
                            <i class="fas fa-check-circle"></i>
                        </div>
                    </div>
                    <div class="col col-stats ms-2">
                        <div class="numbers">
                            <p class="card-category">Completadas</p>
                            <h4 class="card-title">{{ indicadores.citas_completadas }}</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-6 col-sm-4 col-md-2">
        <div class="card card-stats card-round">
            <div class="card-body p-3">
                <div class="row align-items-center">
                    <div class="col-icon">
                        <div class="icon-big text-center icon-info bubble-shadow-small">
                            <i class="fas fa-hospital"></i>
                        </div>
                    </div>
                    <div class="col col-stats ms-2">
                        <div class="numbers">
                            <p class="card-category">Hospitalizados</p>
                            <h4 class="card-title">{{ indicadores.hospitalizados }}</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-6 col-sm-4 col-md-2">
        <div class="card card-stats card-round">
            <div class="card-body p-3">
                <div class="row align-items-center">
                    <div class="col-icon">
                        <div class="icon-big text-center icon-danger bubble-shadow-small">
                            <i class="fas fa-credit-card"></i>
                        </div>
                    </div>
                    <div class="col col-stats ms-2">
                        <div class="numbers">
                            <p class="card-category">Pagos Pendientes</p>
                            <h4 class="card-title">{{ indicadores.cobros_pendientes_count }}</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block dashboard_main %}
<!-- RECEPCIÓN LAYOUT -->
<div class="row mb-3">
    <div class="col-md-8 d-flex flex-column gap-3">
        {% include 'partials/dashboard/agenda.html' %}
        {% include 'partials/dashboard/pacientes.html' %}
    </div>
    <div class="col-md-4 d-flex flex-column gap-3">
        {% include 'partials/dashboard/acciones.html' %}
        {% include 'partials/dashboard/caja.html' %}
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script type="module">
import { initManageWheel } from '{% static "js/base/wheel_base.js" %}';
initManageWheel();

// Recargar página cada 5 minutos para actualizar información
setTimeout(() => location.reload(), 300000);
</script>
{% endblock %}
